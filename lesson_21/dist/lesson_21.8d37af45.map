{"version":3,"sources":["location_api.js","dom.js","index.js"],"names":["LocationApi","fetch","then","resolve","status","json","Promise","reject","catch","console","log","myIp","Dom","preloader","document","getElementsByClassName","inp1","getElementById","inp2","style","display","coordinates","value","latitude","longitude","locationApi","dom","btn","addEventListener","setTimeOut","getMyIp","getMyLocation","ip","setCoordinates","hidePreloader"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAqBA;;;;;;;kCACP;AACR,mBAAOC,MAAM,mCAAN,EACFC,IADE,CACG,UAASC,OAAT,EAAkB;AACpB,oBAAGA,QAAQC,MAAR,KAAiB,GAApB,EAAwB;AACpB,2BAAOD,QAAQE,IAAR,EAAP;AACH,iBAFD,MAEO;AACH,2BAAOC,QAAQC,MAAR,CAAeJ,QAAQC,MAAvB,CAAP;AACH;AACJ,aAPE;AAQL;AACA;AACA;AACA;AAXK,aAYFI,KAZE,CAYI,kBAAU;AACbC,wBAAQC,GAAR,CAAY,+BAAZ,EAA6CH,MAA7C;AACH,aAdE,CAAP;AAeG;;;sCACeI,MAAM;AAChB,mBAAOV,sCAAoCU,IAApC,EACNT,IADM,CACD,mBAAW;AACb,oBAAGC,QAAQC,MAAR,KAAiB,GAApB,EAAwB;AACpB,2BAAOD,QAAQE,IAAR,EAAP;AACH,iBAFD,MAEO;AACH,2BAAOC,QAAQC,MAAR,CAAeJ,QAAQC,MAAvB,CAAP;AACH;AACJ,aAPM;AAQT;AARS,aASNI,KATM,CASA,kBAAU;AACbC,wBAAQC,GAAR,CAAY,gCAAZ,EAA8CH,MAA9C;AACH,aAXM,CAAP;AAaH;;;;;;kBAhCUP;;;;;;;;;;;;ICAAY;AACjB,mBAAc;AAAA;;AACV,YAAMC,YAAYC,SAASC,sBAAT,CAAgC,WAAhC,EAA6C,CAA7C,CAAlB;AACA,YAAMC,OAAOF,SAASG,cAAT,CAAwB,MAAxB,CAAb;AACA,YAAMC,OAAOJ,SAASG,cAAT,CAAwB,MAAxB,CAAb;AACA;AACH;;;;wCAEe;AACZJ,sBAAUM,KAAV,CAAgBC,OAAhB,GAA0B,cAA1B;AACH;;;wCAEe;AACZP,sBAAUM,KAAV,CAAgBC,OAAhB,GAA0B,MAA1B;AACH;;;uCAEcC,aAAa;AACxBL,iBAAKM,KAAL,GAAaD,YAAYE,QAAzB;AACAL,iBAAKI,KAAL,GAAaD,YAAYG,SAAzB;AAEH;;;;;;kBApBgBZ;;;;ACArB;;;;AACA;;;;;;AAEA,IAAMa,cAAc,IAAIzB,sBAAJ,EAApB;AACA,IAAM0B,MAAM,IAAId,aAAJ,EAAZ;AACA,IAAMe,MAAMb,SAASG,cAAT,CAAwB,KAAxB,CAAZ;;AAEAU,IAAIC,gBAAJ,CAAqB,OAArB,EAA8B,YAAM;AAChC;AACAC,eAAW,YAAM;AACbJ,oBAAYK,OAAZ,GACK5B,IADL,CACU;AAAA,mBAAWuB,YAAYM,aAAZ,CAA0B5B,QAAQ6B,EAAlC,CAAX;AAAA,SADV,EAEK9B,IAFL,CAEU;AAAA,mBAAewB,IAAIO,cAAJ,CAAmBZ,WAAnB,CAAf;AAAA,SAFV;AAGI;AAHJ,SAIKb,KAJL,CAIW;AAAA,mBAAYkB,IAAIQ,aAAJ,EAAZ;AAAA,SAJX;AAKH,KAND,EAMG,IANH;AAQH,CAVD","file":"lesson_21.8d37af45.map","sourceRoot":"..","sourcesContent":["export default class LocationApi {\r\n    getMyIp() {\r\n      return fetch('https://api.ipify.org?format=json')\r\n          .then(function(resolve) {\r\n              if(resolve.status===200){\r\n                  return resolve.json();\r\n              } else {\r\n                  return Promise.reject(resolve.status);\r\n              }\r\n          })\r\n        //   .then(MyIp => {\r\n        //       console.log(MyIp.Ip);\r\n        //       return MyIp.Ip;\r\n        //   })\r\n          .catch(reject => {\r\n              console.log(\"Error(Не удалось получить IP)\", reject);\r\n          });\r\n        }\r\n          getMyLocation(myIp) {\r\n              return fetch(`https://freegeoip.net/json/${myIp}`)\r\n              .then(resolve => {\r\n                  if(resolve.status===200){\r\n                      return resolve.json();\r\n                  } else {\r\n                      return Promise.reject(resolve.status);\r\n                  }\r\n              })\r\n            //   .then(resolve => console.log(resolve.latitude, resolve.longitude))\r\n              .catch(reject => {\r\n                  console.log(\"Не удалось получить координаты\", reject);\r\n              })\r\n\r\n          }\r\n\r\n      }\r\n\r\n","export default class Dom {\r\n    constructor() {\r\n        const preloader = document.getElementsByClassName('preloader')[0];\r\n        const inp1 = document.getElementById('inp1');\r\n        const inp2 = document.getElementById('inp2');\r\n        // const btn = document.getElementById('btn');\r\n    }\r\n\r\n    showPreloader() {\r\n        preloader.style.display = 'inline-block';\r\n    }\r\n\r\n    hidePreloader() {\r\n        preloader.style.display = 'none';\r\n    }\r\n\r\n    setCoordinates(coordinates) {\r\n        inp1.value = coordinates.latitude;\r\n        inp2.value = coordinates.longitude;\r\n\r\n    }\r\n} ","import LocationApi from './location_api';\r\nimport Dom from './dom';\r\n\r\nconst locationApi = new LocationApi();\r\nconst dom = new Dom();\r\nconst btn = document.getElementById('btn');\r\n\r\nbtn.addEventListener('click', () => {\r\n    // dom.showPreloader();\r\n    setTimeOut(() => {\r\n        locationApi.getMyIp()\r\n            .then(resolve => locationApi.getMyLocation(resolve.ip))\r\n            .then(coordinates => dom.setCoordinates(coordinates))\r\n            // .then(resolved => dom.hidePreloader())\r\n            .catch(rejected => dom.hidePreloader())\r\n    }, 2000)\r\n   \r\n})\r\n"]}